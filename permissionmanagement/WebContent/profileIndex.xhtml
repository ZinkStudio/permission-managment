<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="index.xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="title">
		<h:outputText value="permission-management : profiles" />
	</ui:define>
	<ui:define name="headerTitle">
		<h:outputText id="layoutTitle" value="Listing Profiles :" />
	</ui:define>
	<ui:define name="content">
		<p:link value="Back Home" outcome="index.xhtml"></p:link>

		<div style="width: 100%; height: 50px;">
			<p:commandButton style="float:right;" value="Create A New Profile"
				icon="ui-icon-star" title="Create a new Profile"
				action="profileCreate.xhtml" />
		</div>
	
	<h:form id="ProfileForm" style="margin-top:20px;"/>
	<p:messages id="messages" />


<!-- 	<p:outputLabel value="Listing Profiles :" /> -->
	<p:dataTable var="profile" value="#{dtProfileView.profiles}"
		rows="10" paginator="true"
		paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
		rowsPerPageTemplate="5,10,15">
		<p:column headerText="Id">
        <h:outputText value="#{profile.id}" />
    </p:column>
 
    <p:column headerText="Name">
        <h:outputText value="#{profile.name}" />
    </p:column>
 
    <p:column headerText="Description">
        <h:outputText value="#{profile.description}" />
    </p:column>
 <!-- Redirections vers les pages de MAJ et de suppressions des utilisateurs -->
 
<!-- 			<p:column headerText="Update" width="50"> -->
			
<!-- 				<p:commandButton id="Update" action= "indexjsf.xhtml"  icon="fa fa-edit" title="Update Profile ?" /> -->
<!-- 			</p:column> -->
			
<!-- 			<p:column headerText="Delete" width="50"> -->
			
<!-- 				<p:commandButton id="Delete"  action= "profileDelete.xhtml" icon=" fa fa-remove" title="Delete Profile ?" /> -->
<!-- 			</p:column> -->
<!--     <p:column headerText="Allpermissions" width="50"> -->
<!-- 				<p:commandButton id="buttonAllPermissions" action="userAllProfiles.xhtml" icon=" fa fa-eye" title="See All users'profiles ?" /> -->
<!-- 				</p:column> -->
<!-- Redirection to userAllProfiles -->
			<p:column headerText="See permissions" width="100">
				<p:commandButton id="buttonAllPermissions"
					action="indexjsf.xhtml" icon=" fa fa-eye"
					title="See all the permissions for this profile ?"
					style="display:block;margin:0 auto;" />
			</p:column>
			
			<p:column headerText="Update" width="60">
				<p:commandButton id="buttonUpdate" action="profileUpdate"
					icon="fa fa-edit" title="Update Profile ?"
					style="display:block;margin:0 auto;" >
					<c:setPropertyActionListener value="#{profile}" target="#{profileUpdateView.profile}" />
					
					</p:commandButton>
			</p:column>
			
			<p:column headerText="Delete" width="60">
				<p:commandButton id="buttonDelete" update="ProfileForm" 
				action="#{profileDeleteView.delete}"
					icon=" fa fa-remove" title="Delete Profile ?"
					 style="display:block;margin:0 auto;">
					 <c:setPropertyActionListener value="#{profile}" target="#{profileDeleteView.profile}" />
					</p:commandButton>
			</p:column>
		</p:dataTable>
		<!-- Redirection statique vers le menu principal -->
		<p:link style="float:right;margin-top:20px;"
			value="Vers Menu Principal" outcome="indexjsf.xhtml"></p:link>


	</ui:define>
</ui:composition>
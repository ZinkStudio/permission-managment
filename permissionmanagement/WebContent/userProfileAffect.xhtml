<ui:composition template="index.xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="title">
		<h:outputText value="permission-management : users" />
	</ui:define>
	<ui:define name="headerTitle">
		<h:outputText id="layoutTitle" value="Listing Users :" />
	</ui:define>
	<ui:define name="content">
		<p:link value="Back Home" outcome="index.xhtml"></p:link>

		<h:form id="UserForm" style="margin-top:20px;">
			<p:panel id="panel"
				header="AFFECTING/UNAFFECTING PROFILES FOR THE FOLLOWING USER :"
				style="font-size:20px;margin-bottom:10px;">
				<h:panelGrid columns="4" cellpadding="5">
					<p:outputLabel for="name" value="Name : " />
					<p:inputText id="name" value="#{userAllProfiles.user.name}"
						label="name" />
					<p:outputLabel for="firstName" value="FirstName : " />
					<p:inputText id="firstName"
						value="#{userAllProfiles.user.firstName}" label="firstName" />
				</h:panelGrid>
			</p:panel>

			<p:panel id="panelTest" header="test :"
				style="font-size:20px;margin-bottom:10px;">
				 <p:schedule
				value="#{bean.eventModel}" editable="true" widgetVar="myschedule">
				<p:ajax event="dateSelect" listener="#{bean.onDateSelect}"
					update="eventDetails" oncomplete="eventDialog.show()" />
				<p:ajax event="eventSelect" listener="#{bean.onEventSelect}"/>
			</p:schedule> </p:panel>

			<p:dataTable var="profile" value="#{dtProfileView.profiles}"
				rows="10" paginator="true"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} "
				rowsPerPageTemplate="5,10,15">
				<p:column headerText="Id" width="30">
					<h:outputText value="#{profile.id}" />
				</p:column>
				<p:column headerText="Name" width="60">
					<h:outputText value="#{profile.name}" />
				</p:column>

				<!-- Redirection to userAllProfiles -->
				<p:column headerText="AFFECT A NEW PROFILE" width="30">
					<p:commandButton id="btnAffect"
						actionListener="userProfileAffectView.unaffect(profile.id)"
						icon=" fa fa-validate" title="Affect a profile?"
						style="display:block;margin:0 auto;" />
				</p:column>
				<p:column headerText="UNAFFECT THIS PROFILE" width="30">
					<p:column headerText="Delete" width="30">
						<p:commandButton id="btnUnaffect" update="@all"
							actionListener="#{userProfileAffectView.unaffect(profile.id)}"
							icon="fa fa-error" style="display:block;margin:0 auto;">
						</p:commandButton>
					</p:column>
				</p:column>
			</p:dataTable>
			<!-- Redirection to the main menu -->
			<p:link style="float:right;margin-top:20px;" value="Back Home"
				outcome="index.xhtml"></p:link>
			<br />
			<!-- Redirection to Add A New Profile to the list -->
			<p:link style="float:right;margin-top:20px;"
				value="Inexistant Profile? Add A New Profile"
				outcome="profileCreate.xhtml"></p:link>
		</h:form>
	</ui:define>
</ui:composition>